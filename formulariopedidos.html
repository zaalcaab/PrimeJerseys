<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Personalizar Camiseta</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Personaliza tu Camiseta</h1>

  <div id="productoInfo"></div>

  <form id="personalizarForm">
    <label for="nombrePersonalizado">Nombre en la camiseta (opcional):</label><br>
    <input type="text" id="nombrePersonalizado" name="nombrePersonalizado" placeholder="Ej. Messi" />
    <br><br>

    <label for="numeroPersonalizado">Número (opcional):</label><br>
    <input type="number" id="numeroPersonalizado" name="numeroPersonalizado" placeholder="10" />
    <br><br>

    <button type="submit">Generar enlace de pago</button>
  </form>

  <div id="pagoInfo"></div>

  <script>
    // 1) Leemos datos de localStorage
    const nombreProducto = localStorage.getItem('productoNombre');
    const precioBase = localStorage.getItem('productoPrecio');

    // 2) Mostramos la info de la camiseta
    const productoInfoDiv = document.getElementById('productoInfo');
    productoInfoDiv.innerHTML = `
      <h2>${nombreProducto}</h2>
      <p>Precio base: ${precioBase} €</p>
    `;

    // 3) Al enviar el formulario, calculamos precio y generamos link de PayPal
    document.getElementById('personalizarForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const nombrePers = document.getElementById('nombrePersonalizado').value.trim();
      const numeroPers = document.getElementById('numeroPersonalizado').value.trim();

      // Convertimos a número
      let precioFinal = parseFloat(precioBase);

      // Si personaliza (nombre o número), le añadimos un extra (ejemplo 5€)
      if (nombrePers !== '' || numeroPers !== '') {
        precioFinal += 5;
      }

      // 4) Generamos el link de PayPal.me
      // Sustituye 'tuUsuario' por tu usuario de PayPal.me
      const linkPago = `https://paypal.me/primejerseys/${precioFinal}`;

      // 5) Mostramos el enlace y un mensaje
      const pagoInfoDiv = document.getElementById('pagoInfo');
      pagoInfoDiv.innerHTML = `
        <h3>Enlace de pago:</h3>
        <a href="${linkPago}" target="_blank">Pagar ${precioFinal}€</a>
        <p>Por favor, incluye en la nota de PayPal que deseas la camiseta <strong>${nombreProducto}</strong>
        con nombre <strong>${nombrePers || 'sin nombre'}</strong> y número <strong>${numeroPers || 'sin número'}</strong>.</p>
      `;
    });
  </script>
</body>
</html>
